<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mapper.PostMapper">

    <sql id="Base_Column_List">
        postId,userId,userAvatar,title,cover,content,category,count,createTime
    </sql>

    <select id="selectAll" resultType="com.example.entity.Post">
        select
        <include refid="Base_Column_List" />
        from post
        <where>
            <if test="category != null"> and category = #{category}</if>
        </where>
        order by postId desc
    </select>

    <insert id="insert" parameterType="com.example.entity.Post" useGeneratedKeys="true" keyProperty="postId">
        insert into post
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="postId != null">postId,</if>
            <if test="userId != null">userId,</if>
            <if test="userAvatar != null">userAvatar,</if>
            <if test="title != null">title,</if>
            <if test="cover != null">cover,</if>
            <if test="content != null">content,</if>
            <if test="category != null">category,</if>
            <if test="count != null">count,</if>
            <if test="createTime != null">createTime,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="postId != null">#{postId},</if>
            <if test="userId != null">#{userId},</if>
            <if test="userAvatar != null">#{userAvatar},</if>
            <if test="title != null">#{title},</if>
            <if test="cover != null">#{cover},</if>
            <if test="content != null">#{content},</if>
            <if test="category != null">#{category},</if>
            <if test="count != null">#{count},</if>
            <if test="createTime != null">#{createTime},</if>
        </trim>
    </insert>

    <select id="selectById" resultType="com.example.entity.Post">
        SELECT * FROM `xm-retirement`.`post` WHERE postId = #{postId}
    </select>

</mapper>
